(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},109:function(e,t,a){},11:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),l=a(15),o=a.n(l);a(39).config();var s="http://localhost:3001/api/locations",i=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getAllLocations",value:function(){return o.a.get(s)}},{key:"getLocationFromId",value:function(e){return o.a.get("".concat(s,"/").concat(e))}},{key:"createNewLocation",value:function(e){return o.a.post(s,e)}},{key:"getGeocodeFromAddress",value:function(e){var t=e.replace(/ /g,"+");return o.a.create().get("".concat("https://maps.googleapis.com/maps/api/geocode/json?address="+t+"&key=AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"))}},{key:"updateLocation",value:function(e){return o.a.patch(s+"/".concat(e._id),e)}}]),e}();t.default=new i},112:function(e,t,a){},12:function(e,t,a){"use strict";a.r(t),a.d(t,"TOKEN_SESSION_ATTRIBUTE_NAME",(function(){return m})),a.d(t,"TOKEN_HEADER_LENGTH",(function(){return u}));var n=a(3),r=a(4),l=a(15),o=a.n(l),s=a(50),i=a.n(s),c="http://localhost:3001/api/users",m="token",u=7,d=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getAllUsers",value:function(){return o.a.get(c)}},{key:"getAllCustomers",value:function(){return o.a.get(c+"/customers",{headers:{authorization:this.getUserToken()}})}},{key:"getUserFromId",value:function(e){return o.a.get("".concat(c,"/").concat(e),{headers:{authorization:this.getUserToken()}})}},{key:"checkEmailExists",value:function(e){return o.a.post("".concat(c,"/email"),e)}},{key:"createNewUser",value:function(e){return o.a.post(c,e)}},{key:"loginUser",value:function(e){return console.log(c),o.a.post("".concat(c,"/login"),e)}},{key:"updateUser",value:function(e){return o.a.patch("".concat(c,"/").concat(e._id),e)}},{key:"registerSuccessfulLoginForJwt",value:function(e){localStorage.setItem(m,e),this.setupAxiosInterceptors(e)}},{key:"getLoggedInUserID",value:function(){var e=localStorage.getItem(m);return null===e?"":i()(e.slice(u)).id}},{key:"getLoggedInUserDetails",value:function(){var e=localStorage.getItem(m);return null===e?"":i()(e.slice(u))}},{key:"getUserToken",value:function(){var e=localStorage.getItem(m);return null===e?"":e.slice(u)}},{key:"setupAxiosInterceptors",value:function(e){var t=this;o.a.interceptors.request.use((function(a){return t.isUserLoggedIn()&&(a.headers.authorization=e),a}))}},{key:"isUserLoggedIn",value:function(){return null!==localStorage.getItem(m)}},{key:"isUserStaff",value:function(){var e=this.getLoggedInUserDetails();return"admin"===e.usertype||"staff"===e.usertype}},{key:"isUserAdmin",value:function(){return"admin"===this.getLoggedInUserDetails().usertype}},{key:"logout",value:function(){localStorage.removeItem(m),window.location.href="/"}}]),e}();t.default=new d},130:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),o=a.n(l),s=(a(81),a(3)),i=a(4),c=a(7),m=a(6),u=a(24),d=a(28),h=a(148),p=a(147),g=a(71),E=a(12),f=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=E.default.isUserLoggedIn(),t=E.default.isUserStaff();return r.a.createElement(h.a,{bg:"light",expand:"lg"},r.a.createElement(h.a.Brand,{href:"/"},"Uber Bus"),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(p.a,{className:"container-fluid"},r.a.createElement(p.a.Link,{href:"/"},"Home"),r.a.createElement(p.a.Link,{href:"/locations"},"Locations"),e&&r.a.createElement(r.a.Fragment,null,!t&&r.a.createElement(p.a.Link,{href:"/myprofile"},"My Profile"),!t&&r.a.createElement(p.a.Link,{href:"/mybookings"},"My Bookings"),!t&&r.a.createElement(p.a.Link,{href:"/dashboard"},"Dashboard"),t&&r.a.createElement(p.a.Link,{href:"/staff"},"Staff Dashboard")),e&&r.a.createElement(g.a,{className:"ml-auto"},r.a.createElement(p.a.Link,{onClick:E.default.logout},"Logout"))),r.a.createElement(p.a,null,!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a.Link,{href:"/signup"},"Signup"),r.a.createElement(p.a.Link,{href:"/login"},"Login")))))}}]),a}(n.Component),b=a(140),v=a(142),k=(a(104),a(105),a(141)),y=a(72),C=(a(106),a(109),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"section-item"},r.a.createElement("div",null,r.a.createElement("h2",null,"Overview"),r.a.createElement(b.a,{fluid:!0,style:{marginTop:"3vh"}},r.a.createElement(k.a,null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"how-it-works"},r.a.createElement("h3",null,"Sign up"),r.a.createElement("p",null,"Simply Sign up for free and Log in to our application"))),r.a.createElement(y.a,null,r.a.createElement("div",{className:"how-it-works"},r.a.createElement("h3",null,"Book"),r.a.createElement("p",null,"Checkout your nearest buses ",r.a.createElement("a",{href:"/locations"},"here"),", then head over to dashboard, pick a time range to get started!")))),r.a.createElement(k.a,null)),r.a.createElement("div",{className:"find-nearest-car-div"},r.a.createElement("h2",null,"Find your nearest bus"),r.a.createElement("p",null,"Our buses are spread all over United States. There's probably one near you"),r.a.createElement("div",null,r.a.createElement(v.a,{href:"/locations"},"Check out our locations")))))}}]),a}(n.Component)),S=a(16),M=a(11),w=(a(112),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={cars:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.default.getAllCars().then((function(t){t.data.cars.forEach((function(t){M.default.getLocationFromId(t.location).then((function(a){t.location=a.data.name,t.locationId=a.data._id,e.state.cars.push(t),e.setState({cars:e.state.cars})}))}))}))}},{key:"render",value:function(){return r.a.createElement("section",{className:"section-item"},r.a.createElement("div",null,r.a.createElement("h2",null,"Our buses"),r.a.createElement(b.a,{fluid:!0},r.a.createElement(k.a,null,this.state.cars.map((function(e){return r.a.createElement(O,{car:e})}))))),r.a.createElement("div",{className:"find-nearest-car-div"},r.a.createElement("h2",null,"Find your nearest bus"),r.a.createElement("p",null,"Our buses are spread all over United States. There's probably one near you"),r.a.createElement("div",null,r.a.createElement(v.a,{href:"/locations"},"Check out our locations"))))}}]),a}(n.Component));function O(e){var t=e.car;return r.a.createElement(y.a,{sm:4},r.a.createElement("div",{className:"cars-div-white"},r.a.createElement("img",{src:t.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},t.make),r.a.createElement("p",null,t.fueltype,", ",t.bodytype,", ",t.seats," seaters, ",t.colour),r.a.createElement("h5",null,"$",t.costperhour," per hour"),r.a.createElement("a",{href:"/locations/"+t.locationId},r.a.createElement("strong",null,"Garage Location:")," ",t.location)))}var j=a(149),L=a(151),I=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"section-item"},r.a.createElement("div",null,r.a.createElement("h2",null,"FAQs"),r.a.createElement(j.a,{style:{marginTop:"7vh"}},r.a.createElement(B,{eventKey:"1",question:"How do I book a bus?",answer:"Signup for an account if you haven't already, login and click on Dashboard to get started!"}),r.a.createElement(B,{eventKey:"2",question:"How do I return when I'm done?",answer:"Head over to Dashboard and select the Return button and you're good to go!"}),r.a.createElement(B,{eventKey:"3",question:"Can I cancel my bookings prior pickup time?",answer:"Yes most definitely! You can do it through My Bookings dashboard."}),r.a.createElement(B,{eventKey:"4",question:"Can I smoke in your bus?",answer:"Smoking is prohibited and will incur a $300 penalty if found guilty."}))))}}]),a}(n.Component);function B(e){var t=e.eventKey,a=e.question,n=e.answer;return r.a.createElement(L.a,{style:{marginBottom:"3vh"}},r.a.createElement(L.a.Header,null,r.a.createElement(j.a.Toggle,{as:v.a,variant:"link",eventKey:t},a)),r.a.createElement(j.a.Collapse,{eventKey:t},r.a.createElement(L.a.Body,null,n)))}var A={borderBottom:"4px solid #009bde"},F=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={component:"Overview"},n}return Object(i.a)(a,[{key:"handleClick",value:function(e){this.setState({component:e.target.innerHTML})}},{key:"render",value:function(){var e=this.state.component;return r.a.createElement("div",{id:"landing-body"},r.a.createElement(p.a,{id:"landing-body-nav",className:"justify-content-center",activeKey:"/home"},r.a.createElement(p.a.Item,{onClick:this.handleClick.bind(this),style:"Overview"===e?A:{}},r.a.createElement(p.a.Link,{className:"nav-link"},"Overview")),r.a.createElement(p.a.Item,{onClick:this.handleClick.bind(this),style:"Cars"===e?A:{}},r.a.createElement(p.a.Link,{className:"nav-link"},"Bus"))),r.a.createElement(P,{component:this.state.component}))}}]),a}(n.Component);function P(e){switch(e.component){case"Overview":return r.a.createElement(C,null);case"Bus":return r.a.createElement(w,null);case"FAQs":return r.a.createElement(I,null);default:return r.a.createElement(C,null)}}var T=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=E.default.isUserLoggedIn(),t=E.default.isUserStaff();return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{id:"landing-page",fluid:!0},r.a.createElement("div",{id:"catchphrase"},r.a.createElement("h1",null,"Uber Bus"),r.a.createElement("h4",null,"There is a driver waiting for you"),e&&!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/dashboard"},r.a.createElement(v.a,{variant:"warning",style:{fontSize:"2vh"}},"Dashboard"))),e&&t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/staff"},r.a.createElement(v.a,{variant:"warning",style:{fontSize:"2vh"}},"Manage System"))),!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/signup"},r.a.createElement(v.a,{variant:"warning",style:{fontSize:"2vh"}},"Sign Up Now"))))),r.a.createElement(b.a,{id:"landing-main",fluid:!0},r.a.createElement(F,null)))}}]),a}(n.Component),N=a(17),D=a(9),z=a(150),U=a(146),G=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t={firstname:n.state.firstname.trim(),lastname:n.state.lastname.trim(),email:n.state.email,password:n.state.password,usertype:"customer"};if(""===n.state.firstname)return n.setState({errorMessage:"First name can't be empty!"});if(""===n.state.lastname)return n.setState({errorMessage:"Last name can't be empty!"});if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n.state.email).toLowerCase()))return n.setState({errorMessage:"Please enter a valid email!"});E.default.createNewUser(t).then((function(){E.default.loginUser({email:n.state.email,password:n.state.password}).then((function(e){E.default.registerSuccessfulLoginForJwt(e.data.token),window.location.href="/"}))})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.state={firstname:"",lastname:"",email:"",password:"",errorMessage:""},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleChange=n.handleChange.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Sign up failed!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(U.a,{onSubmit:this.handleSubmit,id:"signup_form"},r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalFirstName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"First Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"firstname",type:"firstname",placeholder:"First Name",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLastName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Last Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"lastname",type:"lastname",placeholder:"Last Name",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalEmail"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"email",type:"email",placeholder:"Email",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalPassword"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Password"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"password",type:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain: at least one number, one uppercase, lowercase letter, and at least 8 or more characters",placeholder:"Password",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{type:"submit"},"Create Account")),r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement("a",{href:"/login"},"Have an account?")))))}}]),a}(n.Component),x=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.password};if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n.state.email).toLowerCase()))return n.setState({errorMessage:"Please enter a valid email!"});E.default.loginUser(t).then((function(e){E.default.registerSuccessfulLoginForJwt(e.data.token),window.location.href="/"})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.state={email:"",password:"",errorMessage:""},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleChange=n.handleChange.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Login failed!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(U.a,{onSubmit:this.handleSubmit,id:"login_form"},r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalEmail"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"email",type:"email",placeholder:"Email",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalPassword"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Password"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"password",type:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain: at least one number, one uppercase, lowercase letter, and at least 8 or more characters",placeholder:"Password",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{type:"submit"},"Login")))))}}]),a}(n.Component),H=a(13),W=(a(65),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={locations:[],activeMarker:{},showingInfoWindow:!1,selectedPlace:{}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.locations;M.default.getAllLocations().then((function(a){a.data.forEach((function(a){M.default.getGeocodeFromAddress(a.address).then((function(n){var r={id:a._id,address:a.address,name:a.name,lat:n.data.results[0].geometry.location.lat,lng:n.data.results[0].geometry.location.lng,cars:a.cars};t.push(r),e.setState({locations:t})}))}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(H.Map,{google:this.props.google,initialCenter:{lat:-37.815198,lng:144.957045},zoom:14,onClick:this.mapOnMapClick},this.state.locations.map((function(t){return r.a.createElement(H.Marker,{id:t.id,name:t.name,address:t.address,onClick:e.mapOnMarkerClick,position:{lat:t.lat,lng:t.lng}})})),r.a.createElement(H.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location")))))}}]),a}(r.a.Component)),_=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"})(W),q=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return E.default.isUserLoggedIn()?r.a.createElement(d.b,this.props):r.a.createElement(d.a,{to:"/"})}}]),a}(n.Component),R=a(75),V=(a(130),{borderBottom:"4px solid #009bde",color:"white"}),$={color:"white"},K=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=window.location.pathname,t=E.default.isUserAdmin;return r.a.createElement(b.a,{style:{margin:"0",padding:"0",maxWidth:"100%"}},r.a.createElement(k.a,{style:{margin:"0"}},r.a.createElement(y.a,{className:"sidenav",md:2},r.a.createElement("h3",null,t?"Admin":"Staff"," Functions"),r.a.createElement("p",null,r.a.createElement("a",{href:"/staff",style:"/staff"===e?V:$},"Overview")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/signup",style:"/admin/signup"===e?V:$},"Create Account")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/addcars",style:"/admin/addcars"===e?V:$},"Create Bus")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/addlocation",style:"/admin/addlocation"===e?V:$},"Add Location")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/customers",style:"/admin/customers"===e?V:$},"View All Customers")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/bookings",style:"/admin/view/bookings"===e?V:$},"View All Bookings")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/cars",style:"/admin/view/cars"===e?V:$},"View All Buses")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/location",style:"/admin/view/location"===e?V:$},"View All Locations")))),r.a.createElement(y.a,{className:"main",md:10,style:{paddingTop:"5vh"}},this.props.children)))}}]),a}(n.Component),Y=function(e){var t=e.component,a=Object(R.a)(e,["component"]);return E.default.isUserLoggedIn()&&(E.default.isUserStaff()||E.default.isUserAdmin())?r.a.createElement(d.b,Object.assign({},a,{render:function(e){return r.a.createElement(K,null,r.a.createElement(t,e))}})):r.a.createElement(d.a,{to:"/"})},Z=a(143),J=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={location:{},cars:[],activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.url.split("/")[2];M.default.getLocationFromId(t).then((function(t){M.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})})),t.data.cars.forEach((function(t){S.default.getCar(t).then((function(t){e.state.cars.push(t.data.car),e.setState({cars:e.state.cars})}))}))}))}},{key:"render",value:function(){return r.a.createElement(b.a,{style:{padding:"1vh"}},r.a.createElement(Z.a,null,r.a.createElement("h2",null,"Welcome to one of our locations"),r.a.createElement(v.a,{href:"/locations",variant:"primary"},"Back to the map")),this.state.isLoading&&r.a.createElement("div",{id:"garage-map",style:{height:"400px"}},r.a.createElement(H.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"400px"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(H.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(H.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))),r.a.createElement("h3",null,this.state.location.name),r.a.createElement("strong",null,"Address: "),r.a.createElement("p",null,this.state.location.address),r.a.createElement("strong",null,"Number of cars: "),r.a.createElement("p",null,this.state.cars.length),r.a.createElement("strong",null,"Cars at this location:"),r.a.createElement(b.a,{fluid:!0,id:"car-show"},r.a.createElement(k.a,null,this.state.cars.map((function(e){return r.a.createElement(Q,{car:e})})))))}}]),a}(n.Component);function Q(e){var t=e.car;return r.a.createElement(y.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:t.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},t.make),r.a.createElement("p",null,t.fueltype,", ",t.bodytype,", ",t.seats," seaters, ",t.colour),r.a.createElement("h5",null,"$",t.costperhour," per hour")))}var X=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"})(J),ee=a(144),te=["Black","Yellow","Blue","White","Green","Red","Orange","Purple"],ae=["Sedan","MPV","Sports","Hatchback","Ute"],ne=[2,4,5,6,7],re=["Petrol","Diesel"],le=a(15),oe=a.n(le);a(39).config();var se="http://localhost:3001/api/bookings",ie=new(function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"getNextBooking",value:function(){return oe.a.get("".concat(se,"/customers/next"),{headers:{authorization:E.default.getUserToken()}})}},{key:"createBooking",value:function(e){return oe.a.post(se,e)}},{key:"getUserBookings",value:function(e){return oe.a.get("".concat(se,"/customers/all/").concat(e),{headers:{authorization:E.default.getUserToken()}})}},{key:"getUserBooking",value:function(e){return oe.a.get("".concat(se,"/customers/").concat(e),{headers:{authorization:E.default.getUserToken()}})}},{key:"modifyBooking",value:function(e){return oe.a.patch("".concat(se,"/customers/").concat(e.id),e)}},{key:"getAllBookings",value:function(){return oe.a.get("".concat(se,"/customers/all"),{headers:{authorization:E.default.getUserToken()}})}},{key:"getBooking",value:function(e){return oe.a.get("".concat(se,"/").concat(e),{headers:{authorization:E.default.getUserToken()}})}}]),e}()),ce=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleConfirmButton=function(e){e.preventDefault(),console.log(n.state.destination);var t={pickupTime:n.props.pickupTime,returnTime:n.props.returnTime,user:E.default.getLoggedInUserID(),car:n.props.car._id,destination:n.state.destination,location:n.props.car.location};console.log(t),ie.createBooking(t).then((function(e){window.location.href="/mybookings/".concat(e.data.response.booking._id)})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.handleCancelButton=function(e){e.preventDefault(),n.props.togglePopUp()},n.mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={errorMessage:"",location:{},destination:"",destinations:[],activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleConfirmButton=n.handleConfirmButton.bind(Object(D.a)(n)),n.handleCancelButton=n.handleCancelButton.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.car;M.default.getLocationFromId(t.location).then((function(t){M.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))}));var a=this.state.destinations,n=this.state.destination;M.default.getAllLocations().then((function(t){t.data.forEach((function(e){var t={id:e._id,address:e.address,name:e.name};a.push(t)})),n=a[0].id,e.setState({destination:n})}))}},{key:"calculateBookingCost",value:function(){var e=new Date(this.props.pickupTime),t=new Date(this.props.returnTime),a=new Date(t-e).getTime()/3600;return(parseInt(this.props.car.costperhour)*(a/1e3)).toFixed(2)}},{key:"render",value:function(){var e=this.props,t=e.locations,a=e.car,n=e.pickupTime,l=e.returnTime,o=this.calculateBookingCost();return r.a.createElement("div",{className:"container"},this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Booking failed!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"Confirm Booking?"),this.state.isLoading&&r.a.createElement("div",{id:"garage-map",style:{height:"400px"}},r.a.createElement(H.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"400px"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(H.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(H.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))),r.a.createElement("b",null,"Pickup time: ")," ",n," ",r.a.createElement("br",null),r.a.createElement("b",null,"Return time: ")," ",l," ",r.a.createElement("br",null),r.a.createElement("b",null,"Cost: ")," $",o," ",r.a.createElement("br",null),r.a.createElement("b",null,"Location: ")," ",t.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===a.location&&r.a.createElement(r.a.Fragment,null,e.name))}))," ",r.a.createElement("br",null),r.a.createElement("b",null,"Address: ")," ",t.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===a.location&&r.a.createElement(r.a.Fragment,null,e.address))}))," ",r.a.createElement("br",null),r.a.createElement(y.a,{sm:4},r.a.createElement("div",{className:"cars-div-white"},r.a.createElement("img",{src:a.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},a.make),r.a.createElement("p",null,a.fueltype,", ",a.bodytype,", ",a.seats," seaters, ",a.colour),r.a.createElement("h5",null,"$",a.costperhour," per hour"),r.a.createElement("a",{href:"/locations/"+a.locationId},r.a.createElement("strong",null,"Garage Location:")," ",a.location))),r.a.createElement(b.a,null,r.a.createElement(U.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(U.a.Label,null,"Destination"),r.a.createElement(U.a.Control,{name:"destination",as:"select",onChange:this.handleChange},this.state.destinations.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:e.id,defaultValue:e.id},e.name+" @ "+e.address))}))))),r.a.createElement(v.a,{variant:"success",onClick:this.handleConfirmButton},"Confirm"),r.a.createElement(v.a,{variant:"danger",onClick:this.handleCancelButton},"Cancel"))}}]),a}(n.Component),me=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"})(ce),ue=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleSubmitFilter=function(e){e.preventDefault();var t={pickupTime:n.state.pickupTime,returnTime:n.state.returnTime,availableCars:n.state.availableCars,make:n.state.make,seats:n.state.seats,fueltype:n.state.fueltype,colour:n.state.colour,location:n.state.location,bodytype:n.state.bodytype};S.default.filterCars(t).then((function(e){n.setState({availableCars:e.data.availableCars,errorMessage:""})})).catch((function(e){n.setState({errorMessage:e.response.data.message,availableCars:[]})}))},n.state={pickupTime:"",returnTime:"",availableCars:[],make:"",seats:"Any",fueltype:"Any",colour:"Any",location:"Any",bodytype:"Any",locations:[],errorMessage:"",popUp:!1,selectedCar:""},n.handleSubmitFilter=n.handleSubmitFilter.bind(Object(D.a)(n)),n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.togglePopUp=n.togglePopUp.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"togglePopUp",value:function(e){this.state.popUp&&(e=null),this.setState({popUp:!this.state.popUp,selectedCar:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.availableCars,n=t.pickupTime,r=t.returnTime;0!==a.length&&""!==n&&""!==r||this.props.history.push("/dashboard"),this.setState({availableCars:a,pickupTime:n,returnTime:r});var l=this.state.locations;M.default.getAllLocations().then((function(t){t.data.forEach((function(t){var a={id:t._id,address:t.address,name:t.name};l.push(a),e.setState({locations:l})}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,this.state.popUp&&r.a.createElement(me,{locations:this.state.locations,car:this.state.selectedCar,pickupTime:this.state.pickupTime,returnTime:this.state.returnTime,togglePopUp:this.togglePopUp}),r.a.createElement("h2",null,"Search for a car"),this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error filtering cars!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(U.a,{onSubmit:this.handleSubmitFilter,id:"filter_form"},r.a.createElement(U.a.Group,{controlId:"formHorizontalFirstName"},r.a.createElement(U.a.Label,null,"Make"),r.a.createElement(U.a.Control,{name:"make",type:"text",placeholder:"Make",onChange:this.handleChange})),r.a.createElement(U.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(U.a.Label,null,"Seats"),r.a.createElement(U.a.Control,{name:"seats",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),ne.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(U.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(U.a.Label,null,"Fuel Type"),r.a.createElement(U.a.Control,{name:"fueltype",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),re.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(U.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(U.a.Label,null,"Body Type"),r.a.createElement(U.a.Control,{name:"bodytype",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),ae.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(U.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(U.a.Label,null,"Colour"),r.a.createElement(U.a.Control,{name:"colour",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),te.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(U.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(U.a.Label,null,"Location"),r.a.createElement(U.a.Control,{name:"location",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),this.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:e.id},e.name+" @ "+e.address))})))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,null,r.a.createElement(v.a,{type:"submit"},"Filter Buses")))),r.a.createElement("h2",null,"Available Cars from ",this.state.pickupTime," till ",this.state.returnTime),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Make"),r.a.createElement("th",null,"Seats"),r.a.createElement("th",null,"Body Type"),r.a.createElement("th",null,"Colour"),r.a.createElement("th",null,"Cost per hour"),r.a.createElement("th",null,"Fuel Type"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.availableCars.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.make),r.a.createElement("td",null,t.seats),r.a.createElement("td",null,t.bodytype),r.a.createElement("td",null,t.colour),r.a.createElement("td",null,"$",t.costperhour),r.a.createElement("td",null,t.fueltype),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.name))}))),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement("td",null,r.a.createElement(v.a,{onClick:function(){return e.togglePopUp(t)}},"Book")))})))))}}]),a}(n.Component),de=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t={pickupTime:n.state.pickupTime,returnTime:n.state.returnTime};S.default.searchAvailableCars(t).then((function(e){n.props.updateCars(e.data.availableCars,n.state.pickupTime,n.state.returnTime),n.props.history.push("/filter")})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={pickupTime:"",returnTime:"",errorMessage:"",nextBooking:{},nextBookingExists:!1,car:"",location:"",successHeader:"",successMsg:"",availablePickup:!1,avaialbleReturn:!1,activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handlePickupButton=n.handlePickupButton.bind(Object(D.a)(n)),n.handleReturnButton=n.handleReturnButton.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"handlePickupButton",value:function(){var e=this,t=this.state.nextBooking;t.status="Picked up",t.id=t._id,this.setState({nextBooking:t}),ie.modifyBooking(this.state.nextBooking).then((function(){e.setState({successHeader:"Pickup success!",successMsg:"Car has been picked up! Please return it before your specified return time.",availablePickup:!1,avaialbleReturn:!0})}))}},{key:"handleReturnButton",value:function(){var e=this,t=this.state.nextBooking;t.status="Returned",t.id=t._id,this.setState({nextBooking:t}),ie.modifyBooking(this.state.nextBooking).then((function(){e.setState({successHeader:"Return success!",successMsg:"Car has been returned! Thanks for using MZA Car Share!",avaialbleReturn:!1})}))}},{key:"componentDidMount",value:function(){var e=this;ie.getNextBooking().then((function(t){if(Object.keys(t.data).length){var a=new Date;a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),e.setState({nextBooking:t.data,nextBookingExists:!0,availablePickup:!(new Date(t.data.pickuptime)>a)&&"Confirmed"===t.data.status,avaialbleReturn:"Picked up"===t.data.status}),S.default.getCar(t.data.car).then((function(t){e.setState({car:t.data.car})})),M.default.getLocationFromId(t.data.location).then((function(t){M.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))}))}})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement(b.a,null,this.state.successMsg&&r.a.createElement(z.a,{variant:"success"},r.a.createElement(z.a.Heading,null,this.state.successHeader),r.a.createElement("p",null,this.state.successMsg)),this.state.nextBookingExists&&r.a.createElement("div",{className:"white-cards-div"},r.a.createElement(b.a,null,r.a.createElement("h2",null,"Your upcoming booking: "),this.state.isLoading&&r.a.createElement("div",{id:"garage-map",style:{height:"400px"}},r.a.createElement(H.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"400px"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(H.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(H.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))),r.a.createElement("b",null,"Booking ID: ")," ",this.state.nextBooking._id," ",r.a.createElement("br",null),r.a.createElement("b",null,"Booking time: ")," ",this.state.nextBooking.bookedtime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Pickup time: ")," ",this.state.nextBooking.pickuptime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Return time: ")," ",this.state.nextBooking.returntime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Cost: ")," $",this.state.nextBooking.cost," ",r.a.createElement("br",null),r.a.createElement("b",null,"Location: ")," ",this.state.location.name," ",r.a.createElement("br",null),r.a.createElement("b",null,"Address: ")," ",this.state.location.address," ",r.a.createElement("br",null),r.a.createElement("b",null,"Status: ")," ",this.state.nextBooking.status," ",r.a.createElement("br",null),r.a.createElement(v.a,{variant:"success",onClick:this.handlePickupButton,disabled:!this.state.availablePickup},"Pickup"),r.a.createElement(v.a,{variant:"danger",onClick:this.handleReturnButton,disabled:!this.state.avaialbleReturn},"Return"),r.a.createElement(v.a,{href:"/mybookings/".concat(this.state.nextBooking._id)},"View Booking"),r.a.createElement(y.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:this.state.car.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},this.state.car.make),r.a.createElement("p",null,this.state.car.fueltype,", ",this.state.car.bodytype,", ",this.state.car.seats," seaters, ",this.state.car.colour),r.a.createElement("h5",null,"Number Plate: ",this.state.car.numberplate),r.a.createElement("p",null,r.a.createElement("b",null,"Bus ID: "),this.state.car._id))))),r.a.createElement("h2",null,"Let's find you a bus!"),this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error checking availability!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(U.a,{onSubmit:this.handleSubmit,id:"availability_form"},r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalFirstName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Pickup Time"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"pickupTime",type:"datetime-local",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLastName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Return Time"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"returnTime",type:"datetime-local",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{type:"submit"},"Check Availability")))))}}]),a}(n.Component),he=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"})(de),pe=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={bookings:[],locations:[],destinations:[],cars:[],errorMessage:""},n.handleCancelButton=n.handleCancelButton.bind(Object(D.a)(n)),n.getUsersBookings=n.getUsersBookings.bind(Object(D.a)(n)),n.checkBookingPast=n.checkBookingPast.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getUsersBookings(),M.default.getAllLocations().then((function(t){var a=e.state.locations,n=e.state.destinations;t.data.forEach((function(t){var r={id:t._id,address:t.address,name:t.name},l={id:t._id,address:t.address,name:t.name};a.push(r),n.push(l),e.setState({locations:a}),e.setState({destinations:n})}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),S.default.getAllCars().then((function(t){e.setState({cars:t.data.cars})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"getUsersBookings",value:function(){var e=this,t=E.default.getLoggedInUserDetails();ie.getUserBookings(t.id).then((function(t){e.setState({bookings:t.data.bookings.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"checkBookingPast",value:function(e){var t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),new Date(e)>t}},{key:"handleCancelButton",value:function(e){var t=this;e.status="Cancelled",ie.modifyBooking(e).then((function(){t.getUsersBookings()})).catch((function(e){t.setState({errorMessage:e.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error obtaining bookings!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"My Bookings"),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Booking ID"),r.a.createElement("th",null,"Booked Time"),r.a.createElement("th",null,"Pickup Time"),r.a.createElement("th",null,"Return Time"),r.a.createElement("th",null,"Bus"),r.a.createElement("th",null,"Cost"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Destination"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.bookings.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.bookedtime),r.a.createElement("td",null,t.pickuptime),r.a.createElement("td",null,t.returntime),r.a.createElement("td",null,e.state.cars.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.car&&r.a.createElement(r.a.Fragment,null,e.make))}))),r.a.createElement("td",null,"$",t.cost),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.name))}))),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement("td",null,e.state.destinations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.destination&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(v.a,{href:"/mybookings/".concat(t.id)},"View")),"Confirmed"===t.status&&e.checkBookingPast(t.pickuptime)&&r.a.createElement("td",null,r.a.createElement(v.a,{variant:"danger",onClick:function(){return e.handleCancelButton(t)}},"Cancel")))})))))}}]),a}(n.Component),ge=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={location:{},destination:{},booking:{},car:{},errorMessage:"",activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleCancelButton=n.handleCancelButton.bind(Object(D.a)(n)),n.getBookingDetails=n.getBookingDetails.bind(Object(D.a)(n)),n.checkBookingPast=n.checkBookingPast.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"getBookingDetails",value:function(){var e=this;ie.getUserBooking(this.props.match.params.id).then((function(t){e.setState({booking:t.data.booking}),S.default.getCar(e.state.booking.car).then((function(t){e.setState({car:t.data.car})})),M.default.getLocationFromId(e.state.booking.location).then((function(t){M.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))})),M.default.getLocationFromId(e.state.booking.destination).then((function(t){M.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.name,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({destination:n,isLoading:!0})}))}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"componentDidMount",value:function(){this.getBookingDetails()}},{key:"handleCancelButton",value:function(){var e=this,t=this.state.booking;t.status="Cancelled",t.id=t._id,this.setState({booking:t}),ie.modifyBooking(this.state.booking).then((function(){e.getBookingDetails()})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"checkBookingPast",value:function(e){var t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),new Date(e)>t}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Booking details"),this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error obtaining booking!"),r.a.createElement("p",null,this.state.errorMessage)),!this.state.errorMessage&&r.a.createElement(r.a.Fragment,null,this.state.isLoading&&r.a.createElement("div",{id:"garage-map",style:{height:"400px"}},r.a.createElement(H.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"400px"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(H.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(H.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))),r.a.createElement("b",null,"Booking ID: ")," ",this.state.booking._id," ",r.a.createElement("br",null),r.a.createElement("b",null,"Booking time: ")," ",this.state.booking.bookedtime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Pickup time: ")," ",this.state.booking.pickuptime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Return time: ")," ",this.state.booking.returntime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Cost: ")," $",this.state.booking.cost," ",r.a.createElement("br",null),r.a.createElement("b",null,"Location: ")," ",this.state.location.name," ",r.a.createElement("br",null),r.a.createElement("b",null,"Destination: "),this.state.destination.name," ",r.a.createElement("br",null),r.a.createElement("b",null,"Address: ")," ",this.state.location.address," ",r.a.createElement("br",null),r.a.createElement("b",null,"Status: ")," ",this.state.booking.status," ",r.a.createElement("br",null),"Confirmed"===this.state.booking.status&&this.checkBookingPast(this.state.booking.pickuptime)&&r.a.createElement(v.a,{variant:"danger",onClick:this.handleCancelButton},"Cancel"),r.a.createElement(y.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:this.state.car.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},this.state.car.make),r.a.createElement("p",null,this.state.car.fueltype,", ",this.state.car.bodytype,", ",this.state.car.seats," seaters, ",this.state.car.colour),r.a.createElement("h5",null,"Number Plate: ",this.state.car.numberplate),r.a.createElement("p",null,r.a.createElement("b",null,"Bus ID: "),this.state.car._id)))))}}]),a}(n.Component),Ee=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"})(ge),fe=a(12).default,be=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=fe.getLoggedInUserDetails();return r.a.createElement(b.a,null,r.a.createElement("h2",null,"My Profile"),r.a.createElement("strong",null,"First name: "),e.firstname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Last name: "),e.lastname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Email: "),e.email," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Customer ID: "),e.id," ",r.a.createElement("br",null),r.a.createElement(v.a,{href:"/mybookings"},"View My Bookings"))}}]),a}(n.Component),ve=a(12).default,ke=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=ve.getLoggedInUserDetails();return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"My Profile"),r.a.createElement("strong",null,"First name: "),e.firstname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Last name: "),e.lastname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Email: "),e.email," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Staff ID: "),e.id," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Staff type: "),e.usertype," ",r.a.createElement("br",null))}}]),a}(n.Component),ye=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){var t={firstname:n.state.firstname.trim(),lastname:n.state.lastname.trim(),email:n.state.email,password:n.state.password,usertype:n.state.usertype};if(""===n.state.firstname)return n.setState({errorMessage:"First name can't be empty!"});if(""===n.state.lastname)return n.setState({errorMessage:"Last name can't be empty!"});if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n.state.email).toLowerCase()))return n.setState({errorMessage:"Please enter a valid email!"});E.default.createNewUser(t).then((function(){n.setState({successMessage:"User has been created!",errorMessage:""})})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.state={firstname:"",lastname:"",email:"",password:"",usertype:"",errorMessage:"",successMessage:""},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleChange=n.handleChange.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Create Account"),this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Sign up failed!"),r.a.createElement("p",null,this.state.errorMessage)),this.state.successMessage&&r.a.createElement(z.a,{variant:"success"},r.a.createElement(z.a.Heading,null,"Account created!"),r.a.createElement("p",null,this.state.successMessage)),r.a.createElement(U.a,null,r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalFirstName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"First Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"firstname",type:"firstname",placeholder:"First Name",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLastName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Last Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"lastname",type:"lastname",placeholder:"Last Name",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalEmail"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"email",type:"email",placeholder:"Email",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalPassword"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Password"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"password",type:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain: at least one number, one uppercase, lowercase letter, and at least 8 or more characters",placeholder:"Password",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalUserType"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Account Type"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"usertype",as:"select",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select account type"),r.a.createElement("option",null,"customer"),r.a.createElement("option",null,"staff"),r.a.createElement("option",null,"admin")))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{onClick:this.handleSubmit},"Create Account")))))}}]),a}(n.Component),Ce=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).resetState=function(){n.setState({make:"",seats:"",bodytype:"",numberplate:"",colour:"",costperhour:"",fueltype:"",location:"",b64photo:""})},n.handleFile=function(e){var t=e.target.files;if(null!==t){if(e.target.files[0].size>4e6)return n.setState({errMsg:"Image exceeded upload size limit! Please try again with another image."});var a=new FileReader;a.readAsDataURL(t[0]),a.onload=function(e){n.setState({b64photo:e.target.result,errMsg:""})}}},n.handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.inputValidation=function(){var e=n.state,t=e.make,a=e.seats,r=e.bodytype,l=e.numberplate,o=e.colour,s=e.costperhour,i=e.fueltype,c=e.location,m=e.b64photo;return""===t||""===a||""===r||""===l||""===o||""===s||""===i||""===c||""===m?(n.setState({errMsg:"Please fill in everything"}),!1):(n.setState({errMsg:""}),!0)},n.handleSubmit=function(e){if(e.preventDefault(),n.inputValidation()){n.setState({disableSubmit:!0});var t={make:n.state.make.trim(),seats:n.state.seats,bodytype:n.state.bodytype,numberplate:n.state.numberplate.trim(),colour:n.state.colour,costperhour:n.state.costperhour,fueltype:n.state.fueltype,location:n.state.location,b64photo:n.state.b64photo};S.default.createNewCar(t).then((function(e){n.setState({disableSubmit:!1,successMsg:"Successfully added car",errMsg:""})}),(function(e){n.setState({disableSubmit:!1,successMsg:"",errMsg:e.response.data.message}),console.log(e.response)}))}},n.state={make:"",seats:"",bodytype:"",numberplate:"",colour:"",costperhour:"",fueltype:"",location:"",locationList:[],disableSubmit:!1,successMsg:"",errMsg:"",b64photo:""},n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleFile=n.handleFile.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;M.default.getAllLocations().then((function(t){t.data.map((function(t){return e.setState({locationList:e.state.locationList.concat(t.address)})}))}),(function(e){console.log(e.response)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Create Bus"),this.state.errMsg&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Add bus failed!"),r.a.createElement("p",null,this.state.errMsg)),this.state.successMsg&&r.a.createElement(z.a,{variant:"success"},r.a.createElement(z.a.Heading,null,"Add bus succeed!"),r.a.createElement("p",null,this.state.successMsg)),r.a.createElement(U.a,null,r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalMake"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Make"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"make",type:"make",placeholder:"Bus Make",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalSeats"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Seats"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"seats",type:"seats",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select seat number"),ne.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalBodyType"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Body type"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"bodytype",type:"bodytype",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select body type"),ae.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalNumberPlate"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Number Plate"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"numberplate",type:"numberplate",placeholder:"Enter plate number",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalColour"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Colour"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"colour",type:"colour",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select colour"),te.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalCostPerHour"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Cost per hour"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"costperhour",type:"number",placeholder:"Select cost per hour",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalFuelType"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Fuel type"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"fueltype",type:"fueltype",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select fuel type"),re.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLocation"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Location"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"location",type:"location",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select location"),"l",this.state.locationList.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLocation"},r.a.createElement(U.a.Label,{column:!0,sm:2}),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.File,{id:"custom-file",label:"Bus Image (4MB max)",name:"b64photo",accept:"image/*",onChange:this.handleFile}))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Create Bus")))))}}]),a}(n.Component),Se=a(45),Me=a.n(Se),we=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initMap=function(){n.setState({gmapsLoaded:!0})},n.handleAutocomplete=function(e){n.setState({address:e})},n.handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){var t=n.state,a=t.name,r=t.address;if(e.preventDefault(),n.setState({successMsg:"",errMsg:"",disableSubmit:!0}),""===a||""===r)n.setState({errMsg:"name and address cannot be empty",disableSubmit:!1});else{var l={name:a.trim(),address:r};M.default.createNewLocation(l).then((function(e){console.log(e.data),n.setState({successMsg:"Location successfully added",disableSubmit:!1,name:"",address:""})}),(function(e){n.setState({errMsg:e.response.data.message,disableSubmit:!1})}))}},n.state={name:"",address:"",errMsg:"",gmapsLoaded:!1,disableSubmit:!1},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handleAutocomplete=n.handleAutocomplete.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.initMap=this.initMap;var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms&libraries=places&callback=initMap",document.querySelector("body").insertAdjacentElement("beforeend",e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Create Location"),this.state.errMsg&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Add location failed!"),r.a.createElement("p",null,this.state.errMsg)),this.state.successMsg&&r.a.createElement(z.a,{variant:"success"},r.a.createElement(z.a.Heading,null,"Add location succeed!"),r.a.createElement("p",null,this.state.successMsg)),r.a.createElement(U.a,null,r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalName"},r.a.createElement(U.a.Label,{column:!0,sm:2,required:!0},"Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"name",type:"name",placeholder:"Location Name",onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Enter Address"),r.a.createElement(y.a,{sm:10},this.state.gmapsLoaded&&r.a.createElement(Me.a,{value:this.state.address,onChange:this.handleAutocomplete,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,l=e.loading;return r.a.createElement("div",null,r.a.createElement(U.a.Control,t({placeholder:"Search Places ...",className:"location-search-input",required:!0})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},l&&r.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:t,style:a}),r.a.createElement("span",null,e.description))}))))})))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Create Location")))))}}]),a}(n.Component),Oe=a(12).default,je=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={customers:[],errorMessage:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Oe.getAllCustomers().then((function(t){e.setState({customers:t.data.customers.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement(b.a,null,this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error obtaining customers!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"View All Customers"),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Customer ID"),r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.customers.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.firstname),r.a.createElement("td",null,e.lastname),r.a.createElement("td",null,e.email),r.a.createElement("td",null,r.a.createElement(v.a,{href:"/admin/view/customers/".concat(e.id)},"View")))})))))}}]),a}(n.Component),Le=a(145),Ie=a(12).default,Be=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={customer:{},errorMessage:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Ie.getUserFromId(this.props.match.params.id).then((function(t){e.setState({customer:t.data.user})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement(b.a,null,this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error fetching customer details!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"Customer Details"),r.a.createElement("strong",null,"Customer ID:")," ",this.state.customer._id," ",r.a.createElement("br",null),r.a.createElement("strong",null,"First name:")," ",this.state.customer.firstname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Last name:")," ",this.state.customer.lastname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Email:")," ",this.state.customer.email," ",r.a.createElement("br",null),r.a.createElement(Le.a,{style:{marginTop:"3vh"}},r.a.createElement(v.a,{href:"/admin/view/customers/".concat(this.state.customer._id,"/bookings")},"View Customer's Bookings"),r.a.createElement(v.a,{href:"/admin/modify/customers/".concat(this.state.customer._id)},"Modify Customer Details")))}}]),a}(n.Component),Ae=a(12).default,Fe=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state.customer;if(""===n.state.firstname.trim())return n.setState({modifyErrorMessage:"First name shall not be empty"});if(t.firstname=n.state.firstname.trim(),""===n.state.lastname.trim())return n.setState({modifyErrorMessage:"Last name shall not be empty"});if(t.lastname=n.state.lastname.trim(),""===n.state.email.trim())return n.setState({modifyErrorMessage:"Email shall not be empty"});var a={email:n.state.email.trim()};Ae.checkEmailExists(a).then((function(e){if(e.data.exist&&n.state.email!==n.state.customer.email)return n.setState({modifyErrorMessage:"Email already exists! Please revert or try another one."});t.email=n.state.email.trim(),Ae.updateUser(t).then((function(e){return window.location.href="/admin/view/customers/".concat(n.state.customer._id)})).catch((function(e){return n.setState({modifyErrorMessage:e.response.data.message})}))})).catch((function(){return n.setState({modifyErrorMessage:"Error checking if email exists!"})}))},n.state={customer:{},firstname:"",lastname:"",email:"",fetchErrorMessage:"",modifyErrorMessage:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Ae.getUserFromId(this.props.match.params.id).then((function(t){e.setState({firstname:t.data.user.firstname,lastname:t.data.user.lastname,email:t.data.user.email,id:t.data.user._id,customer:t.data.user})})).catch((function(t){e.setState({fetchErrorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.state.fetchErrorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error fetching customer details!"),r.a.createElement("p",null,this.state.fetchErrorMessage)),this.state.modifyErrorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error modifying customer details!"),r.a.createElement("p",null,this.state.modifyErrorMessage)),r.a.createElement("h2",null,"Modify Customer Details"),r.a.createElement("strong",null,"Customer ID:")," ",this.state.customer._id," ",r.a.createElement("br",null),r.a.createElement(U.a,null,r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalFirstName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"First Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"firstname",type:"text",value:this.state.firstname,onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLastName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Last Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"lastname",type:"text",value:this.state.lastname,onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalEmail"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"email",type:"email",value:this.state.email,onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{onClick:this.handleSubmit},"Modify User"),r.a.createElement(v.a,{variant:"danger",href:"/admin/view/customers/".concat(this.state.customer._id)},"Cancel")))))}}]),a}(n.Component),Pe=a(11).default,Te=a(16).default,Ne=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={bookings:[],locations:[],cars:[],errorMessage:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;ie.getAllBookings().then((function(t){e.setState({bookings:t.data.bookings.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),Pe.getAllLocations().then((function(t){var a=e.state.locations;t.data.forEach((function(t){var n={id:t._id,address:t.address,name:t.name};a.push(n),e.setState({locations:a})}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),Te.getAllCars().then((function(t){e.setState({cars:t.data.cars})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error fetching all bookings!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"View All Bookings"),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Booking ID"),r.a.createElement("th",null,"User ID"),r.a.createElement("th",null,"Booked Time"),r.a.createElement("th",null,"Pickup Time"),r.a.createElement("th",null,"Return Time"),r.a.createElement("th",null,"Car ID"),r.a.createElement("th",null,"Cost"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.bookings.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement("a",{href:"/admin/view/customers/".concat(t.user)},t.user)),r.a.createElement("td",null,t.bookedtime),r.a.createElement("td",null,t.pickuptime),r.a.createElement("td",null,t.returntime),r.a.createElement("td",null,e.state.cars.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.car&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/cars/".concat(t.car)},e.make)))}))),r.a.createElement("td",null,"$",t.cost),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/location/".concat(t.location)},e.name)))}))),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(v.a,{href:"/admin/view/bookings/".concat(t.id)},"View")))})))))}}]),a}(n.Component),De=a(11).default,ze=a(16).default,Ue=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={booking:{},car:{},location:{},errorMessage:"",activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleCancelButton=n.handleCancelButton.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"getBookingDetails",value:function(){var e=this;ie.getBooking(this.props.match.params.id).then((function(t){e.setState({booking:t.data.booking}),ze.getCar(e.state.booking.car).then((function(t){e.setState({car:t.data.car})})),De.getLocationFromId(e.state.booking.location).then((function(t){De.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"componentDidMount",value:function(){this.getBookingDetails()}},{key:"handleCancelButton",value:function(){var e=this,t=this.state.booking;t.status="Cancelled",t.id=t._id,this.setState({booking:t}),ie.modifyBooking(this.state.booking).then((function(){e.getBookingDetails()}))}},{key:"checkBookingPast",value:function(e){var t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),new Date(e)>t}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("h2",null,"Booking details"),this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error obtaining booking!"),r.a.createElement("p",null,this.state.errorMessage)),this.state.isLoading&&r.a.createElement("div",{id:"garage-map",style:{height:"400px"}},r.a.createElement(H.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"400px"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(H.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(H.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))),!this.state.errorMessage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"Booking ID: ")," ",this.state.booking._id," ",r.a.createElement("br",null),r.a.createElement("b",null,"Booking time: ")," ",this.state.booking.bookedtime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Pickup time: ")," ",this.state.booking.pickuptime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Return time: ")," ",this.state.booking.returntime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Cost: ")," $",this.state.booking.cost," ",r.a.createElement("br",null),r.a.createElement("b",null,"Location: ")," ",r.a.createElement("a",{href:"/admin/view/location/".concat(this.state.location.id)},this.state.location.name)," ",r.a.createElement("br",null),r.a.createElement("b",null,"Address: ")," ",this.state.location.address," ",r.a.createElement("br",null),r.a.createElement("b",null,"Status: ")," ",this.state.booking.status," ",r.a.createElement("br",null),"Confirmed"===this.state.booking.status&&this.checkBookingPast(this.state.booking.pickuptime)&&r.a.createElement(v.a,{variant:"danger",onClick:this.handleCancelButton},"Cancel"),r.a.createElement(y.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:this.state.car.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},this.state.car.make),r.a.createElement("p",null,this.state.car.fueltype,", ",this.state.car.bodytype,", ",this.state.car.seats," seaters, ",this.state.car.colour),r.a.createElement("h5",null,"$",this.state.car.costperhour," per hour"),r.a.createElement("h5",null,"Number Plate: ",this.state.car.numberplate),r.a.createElement("a",{href:"/admin/view/cars/".concat(this.state.car._id)},r.a.createElement("b",null,"Bus ID: "),this.state.car._id)))))}}]),a}(n.Component),Ge=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"})(Ue),xe=a(11).default,He=a(16).default,We=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={bookings:[],locations:[],cars:[],errorMessage:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;ie.getUserBookings(this.props.match.params.id).then((function(t){e.setState({bookings:t.data.bookings.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),xe.getAllLocations().then((function(t){var a=e.state.locations;t.data.forEach((function(t){var n={id:t._id,address:t.address,name:t.name};a.push(n),e.setState({locations:a})}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),He.getAllCars().then((function(t){e.setState({cars:t.data.cars})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error fetching customer's bookings!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"Bookings for Customer ",this.props.match.params.id),r.a.createElement(v.a,{href:"/admin/view/customers/".concat(this.props.match.params.id)},"View Customer Profile"),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Booking ID"),r.a.createElement("th",null,"Booked Time"),r.a.createElement("th",null,"Pickup Time"),r.a.createElement("th",null,"Return Time"),r.a.createElement("th",null,"Car"),r.a.createElement("th",null,"Cost"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.bookings.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.bookedtime),r.a.createElement("td",null,t.pickuptime),r.a.createElement("td",null,t.returntime),r.a.createElement("td",null,e.state.cars.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.car&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/cars/".concat(t.car)},e.make)))}))),r.a.createElement("td",null,"$",t.cost),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/location/".concat(t.location)},e.name)))}))),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(v.a,{href:"/admin/view/bookings/".concat(t.id)},"View")))})))))}}]),a}(n.Component),_e=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={cars:[],errorMessage:""},n.viewCarDetails=n.viewCarDetails.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"viewCarDetails",value:function(e){this.props.history.push("/admin/view/cars/".concat(e))}},{key:"componentDidMount",value:function(){var e=this;S.default.getAllCars().then((function(t){t.data.cars.forEach((function(t){M.default.getLocationFromId(t.location).then((function(a){t.location=a.data.name,t.locationId=a.data._id,e.state.cars.push(t),e.setState({cars:e.state.cars})}))}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement("h2",null,"All cars, click row to view/modify."),this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error Getting all cars!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"make"),r.a.createElement("th",null,"seats"),r.a.createElement("th",null,"body type"),r.a.createElement("th",null,"number plate"),r.a.createElement("th",null,"colour"),r.a.createElement("th",null,"cost per hour"),r.a.createElement("th",null,"fuel type"),r.a.createElement("th",null,"location"),r.a.createElement("th",null,"image"),r.a.createElement("th",null,"current booking"))),r.a.createElement("tbody",null,this.state.cars.map((function(t){return r.a.createElement("tr",{style:{cursor:"pointer"},key:t.id,onClick:function(){return e.viewCarDetails(t.id)}},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.make),r.a.createElement("td",null,t.seats),r.a.createElement("td",null,t.bodytype),r.a.createElement("td",null,t.numberplate),r.a.createElement("td",null,t.colour),r.a.createElement("td",null,t.costperhour),r.a.createElement("td",null,t.fueltype),r.a.createElement("td",null,t.location),r.a.createElement("td",null,r.a.createElement("img",{alt:"car",src:t.image,width:50})),r.a.createElement("td",null,null===t.currentbooking?"No booking":t.currentbooking))})))))}}]),a}(n.Component),qe=Object(d.g)(_e),Re=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFile=function(e){var t=e.target.files;if(null!==t){if(e.target.files[0].size>4e6)return n.setState({errMsg:"Image exceeded upload size limit! Please try again with another image."});var a=new FileReader;a.readAsDataURL(t[0]),a.onload=function(e){n.setState({b64photo:e.target.result,errMsg:""})}}},n.inputValidation=function(){var e=n.state,t=e.make,a=e.seats,r=e.bodytype,l=e.numberplate,o=e.colour,s=e.costperhour,i=e.fueltype,c=e.location,m=e.b64photo;return""===t||""===a||""===r||""===l||""===o||""===s||""===i||""===c||""===m?(n.setState({errMsg:"Please fill in everything"}),!1):(n.setState({errMsg:""}),!0)},n.handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.state={car:"",locationList:[],make:"",seats:"",bodytype:"",numberplate:"",colour:"",costperhour:"",fueltype:"",location:"",b64photo:"",errMsg:"",successMsg:""},n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleFile=n.handleFile.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.inputValidation()){var a=this.state.car;this.setState({disableSubmit:!0});var n={_id:a._id,make:this.state.make,seats:this.state.seats,bodytype:this.state.bodytype,numberplate:this.state.numberplate,colour:this.state.colour,costperhour:this.state.costperhour,fueltype:this.state.fueltype,location:this.state.location,image:this.state.b64photo};S.default.updateCar(n).then((function(e){t.setState({successMsg:"Car is successfully updated",disableSubmit:!1,errMsg:""}),t.getCar(),t.scrollTop()})).catch((function(e){t.setState({errMsg:e.response.data.message,disableSubmit:!1,successMsg:""})}))}}},{key:"scrollTop",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"getCar",value:function(){var e=this;S.default.getCar(this.props.match.params.id).then((function(t){var a=t.data.car;M.default.getLocationFromId(a.location).then((function(t){a.location=t.data.address,a.locationId=t.data._id,e.setState({car:a,make:a.make,numberplate:a.numberplate,costperhour:a.costperhour,seats:a.seats,colour:a.colour,bodytype:a.bodytype,location:a.locationId,fueltype:a.fueltype,b64photo:a.image})}))})).catch((function(t){e.setState({errMsg:t.response})}))}},{key:"componentDidMount",value:function(){var e=this;this.getCar(),M.default.getAllLocations().then((function(t){t.data.map((function(t){return e.setState({locationList:e.state.locationList.concat(t)})}))}),(function(t){e.setState({errMsg:t.response})}))}},{key:"render",value:function(){var e=this.state.car;return r.a.createElement(b.a,null,r.a.createElement("h2",null,"Car details:"),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"make"),r.a.createElement("th",null,"seats"),r.a.createElement("th",null,"body type"),r.a.createElement("th",null,"number plate"),r.a.createElement("th",null,"colour"),r.a.createElement("th",null,"cost per hour"),r.a.createElement("th",null,"fuel type"),r.a.createElement("th",null,"location"),r.a.createElement("th",null,"image"),r.a.createElement("th",null,"current booking"))),r.a.createElement("tbody",null,r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.make),r.a.createElement("td",null,e.seats),r.a.createElement("td",null,e.bodytype),r.a.createElement("td",null,e.numberplate),r.a.createElement("td",null,e.colour),r.a.createElement("td",null,e.costperhour),r.a.createElement("td",null,e.fueltype),r.a.createElement("td",null,e.location),r.a.createElement("td",null,r.a.createElement("img",{alt:"car",src:e.image,width:50})),r.a.createElement("td",null,null===e.currentbooking?"No booking":e.currentbooking)))),r.a.createElement("h2",null,"Modify details"),this.state.errMsg&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Modify car failed!"),r.a.createElement("p",null,this.state.errMsg)),this.state.successMsg&&r.a.createElement(z.a,{variant:"success"},r.a.createElement(z.a.Heading,null,"Modify car succeed!"),r.a.createElement("p",null,this.state.successMsg)),r.a.createElement(U.a,null,r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalMake"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Make"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"make",type:"make",value:this.state.make,onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalSeats"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Seats"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"seats",type:"seats",onChange:this.handleChange,required:!0},ne.map((function(t,a){return t===e.seats?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalBodyType"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Body type"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"bodytype",type:"bodytype",onChange:this.handleChange,required:!0},ae.map((function(t,a){return t===e.bodytype?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalNumberPlate"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Number Plate"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"numberplate",type:"numberplate",value:this.state.numberplate,onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalColour"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Colour"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"colour",type:"colour",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select colour"),te.map((function(t,a){return t===e.colour?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalCostPerHour"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Cost per hour"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"costperhour",type:"number",value:this.state.costperhour,onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalFuelType"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Fuel type"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"fueltype",type:"fueltype",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select fuel type"),re.map((function(t,a){return t===e.fueltype?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLocation"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Location"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{as:"select",name:"location",type:"location",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select location"),"l",this.state.locationList.map((function(t,a){return t.address===e.location?r.a.createElement("option",{key:a,value:t._id,selected:!0},t.address):r.a.createElement("option",{key:a,value:t._id},t.address)}))))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalLocation"},r.a.createElement(U.a.Label,{column:!0,sm:2}),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.File,{id:"custom-file",label:"Car Image (4MB max)",name:"b64photo",accept:"image/*",onChange:this.handleFile}))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Update Car")))))}}]),a}(n.Component),Ve=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={locations:[],errorMessage:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;M.default.getAllLocations().then((function(t){e.setState({locations:t.data})})).catch((function(t){e.setState({errorMessage:t.response})}))}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("h2",null,"All locations, click to view details"),this.state.errorMessage&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Error Getting all cars!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"name"),r.a.createElement("th",null,"address"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.locations.map((function(e){return r.a.createElement("tr",{style:{cursor:"pointer"},key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.address),r.a.createElement("td",null,r.a.createElement(v.a,{href:"/admin/modify/location/".concat(e._id)},"Modify")),r.a.createElement("td",null,r.a.createElement(v.a,{href:"/admin/view/location/".concat(e._id)},"View")))})))))}}]),a}(n.Component),$e=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={location:"",errMessage:"",cars:[],successMessage:"",activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;void 0!==this.props.location.state&&this.setState({successMessage:this.props.location.state.success}),M.default.getLocationFromId(this.props.match.params.id).then((function(t){M.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})})),t.data.cars.forEach((function(t){S.default.getCar(t).then((function(t){e.state.cars.push(t.data.car),e.setState({cars:e.state.cars})}))}))})).catch((function(t){e.setState({errMessage:t.response})}))}},{key:"render",value:function(){var e=this.state.location;return r.a.createElement(b.a,null,this.state.successMessage&&r.a.createElement(z.a,{variant:"success"},r.a.createElement(z.a.Heading,null,"Add bus succeed!"),r.a.createElement("p",null,this.state.successMessage)),r.a.createElement("h2",null,"Location details:"),r.a.createElement(ee.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"name"),r.a.createElement("th",null,"address"),r.a.createElement("th",null))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.address),r.a.createElement("td",null,r.a.createElement(v.a,{href:"/admin/modify/location/".concat(e.id)},"Modify"))))),r.a.createElement(b.a,null,this.state.isLoading&&r.a.createElement("div",{style:{height:"400px"}},r.a.createElement(H.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"50%"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(H.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(H.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location")))))),r.a.createElement("h2",null,"Buses here:"),r.a.createElement(k.a,null,0!==this.state.cars.length?this.state.cars.map((function(e){return r.a.createElement(Ke,{car:e})})):r.a.createElement(y.a,null,"Garage empty")))}}]),a}(n.Component);function Ke(e){var t=e.car;return r.a.createElement(y.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:t.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},t.make),r.a.createElement("p",null,t.fueltype,", ",t.bodytype,", ",t.seats," seaters, ",t.colour),r.a.createElement("h5",null,"$",t.costperhour," per hour"),r.a.createElement("h5",null,"Number Plate: ",t.numberplate),r.a.createElement("a",{href:"/admin/view/cars/".concat(t._id)},r.a.createElement("b",null,"Bus ID: "),t._id)))}var Ye=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms"})($e),Ze=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initMap=function(){n.setState({gmapsLoaded:!0})},n.handleAutocomplete=function(e){n.setState({address:e})},n.handleChange=function(e){n.setState(Object(N.a)({},e.target.name,e.target.value))},n.state={location:"",address:"",name:"",errMsg:"",gmapsLoaded:!1,successMsg:"",disableSubmit:!1},n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.handleAutocomplete=n.handleAutocomplete.bind(Object(D.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.initMap=this.initMap;var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAF3TYatEpzOshnx4qtfRNuthI3j6GWUms&libraries=places&callback=initMap",document.querySelector("body").insertAdjacentElement("beforeend",t),M.default.getLocationFromId(this.props.match.params.id).then((function(t){e.setState({address:t.data.address,name:t.data.name,location:t.data})})).catch((function(t){e.setState({errMsg:t.response})}))}},{key:"handleSubmit",value:function(){var e=this;if(""!==this.state.name){this.setState({disableSubmit:!0});var t={_id:this.state.location._id,name:this.state.name,address:this.state.address,cars:this.state.location.cars};M.default.updateLocation(t).then((function(a){e.props.history.push("/admin/view/location/".concat(t._id),{success:"Successfully updated location"})})).catch((function(t){e.setState({errMsg:t.response.data.message,disableSubmit:!1,successMsg:""})}))}else this.setState({errMsg:"name can't be empty"})}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("h2",null,"Modify Location Details"),r.a.createElement("strong",null,"Location ID:")," ",this.state.location._id," ",r.a.createElement("br",null),this.state.errMsg&&r.a.createElement(z.a,{variant:"danger"},r.a.createElement(z.a.Heading,null,"Modify location failed!"),r.a.createElement("p",null,this.state.errMsg)),r.a.createElement(U.a,null,r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalFirstName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Name"),r.a.createElement(y.a,{sm:10},r.a.createElement(U.a.Control,{name:"name",type:"text",value:this.state.name,onChange:this.handleChange,required:!0}))),r.a.createElement(U.a.Group,{as:k.a,controlId:"formHorizontalName"},r.a.createElement(U.a.Label,{column:!0,sm:2},"Enter Address"),r.a.createElement(y.a,{sm:10},this.state.gmapsLoaded&&r.a.createElement(Me.a,{value:this.state.address,onChange:this.handleAutocomplete,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,l=e.loading;return r.a.createElement("div",null,r.a.createElement(U.a.Control,t({placeholder:"Search Places ...",className:"location-search-input",required:!0})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},l&&r.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:t,style:a}),r.a.createElement("span",null,e.description))}))))})))),r.a.createElement(U.a.Group,{as:k.a},r.a.createElement(y.a,{sm:{span:10,offset:2}},r.a.createElement(v.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Update Location")))))}}]),a}(n.Component),Je=Object(d.g)(Ze),Qe=(a(135),a(136),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={availableCars:[],pickupTime:"",returnTime:""},e}return Object(i.a)(a,[{key:"updateCars",value:function(e,t,a){this.setState({availableCars:e,pickupTime:t,returnTime:a})}},{key:"componentDidMount",value:function(){E.default.isUserLoggedIn()&&E.default.setupAxiosInterceptors(E.default.getUserToken())}},{key:"render",value:function(){var e=this,t=this.state,a=t.availableCars,n=t.pickupTime,l=t.returnTime,o=E.default.isUserStaff();return r.a.createElement(u.a,null,r.a.createElement(f,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:T}),r.a.createElement(d.b,{path:"/signup",component:G}),r.a.createElement(d.b,{path:"/login",component:x}),r.a.createElement(d.b,{path:"/locations/:id",component:X}),r.a.createElement(d.b,{path:"/locations",component:_}),!o&&r.a.createElement(q,{path:"/filter",component:function(e){return r.a.createElement(ue,Object.assign({},e,{availableCars:a,pickupTime:n,returnTime:l}))}}),!o&&r.a.createElement(q,{path:"/dashboard",component:function(t){return r.a.createElement(he,Object.assign({},t,{updateCars:e.updateCars.bind(e)}))}}),!o&&r.a.createElement(q,{path:"/mybookings/:id",component:Ee}),!o&&r.a.createElement(q,{path:"/mybookings",component:pe}),!o&&r.a.createElement(q,{path:"/myprofile",component:be}),r.a.createElement(Y,{path:"/staff",component:ke}),r.a.createElement(Y,{path:"/admin/signup",component:ye}),r.a.createElement(Y,{path:"/admin/addcars",component:Ce}),r.a.createElement(Y,{path:"/admin/addlocation",component:we}),r.a.createElement(Y,{path:"/admin/view/customers/:id/bookings",component:We}),r.a.createElement(Y,{path:"/admin/view/customers/:id",component:Be}),r.a.createElement(Y,{path:"/admin/view/customers",component:je}),r.a.createElement(Y,{path:"/admin/view/bookings/:id",component:Ge}),r.a.createElement(Y,{path:"/admin/view/bookings",component:Ne}),r.a.createElement(Y,{path:"/admin/modify/customers/:id",component:Fe}),r.a.createElement(Y,{path:"/admin/view/cars/:id",component:Re}),r.a.createElement(Y,{path:"/admin/view/cars",component:qe}),r.a.createElement(Y,{path:"/admin/modify/location/:id",component:Je}),r.a.createElement(Y,{path:"/admin/view/location/:id",component:Ye}),r.a.createElement(Y,{path:"/admin/view/location",component:Ve})))}}]),a}(n.Component)),Xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function et(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(39).config(),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Qe,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Xe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):et(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):et(t,e)}))}}()},16:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),l=a(15),o=a.n(l);a(39).config();var s="http://localhost:3001/api/cars",i=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"createNewCar",value:function(e){return o.a.post(s,e)}},{key:"getAllCars",value:function(){return o.a.get(s)}},{key:"getCar",value:function(e){return o.a.get("".concat(s,"/").concat(e))}},{key:"searchAvailableCars",value:function(e){return o.a.post(s+"/availability",e)}},{key:"filterCars",value:function(e){return o.a.post(s+"/filter",e)}},{key:"updateCar",value:function(e){return o.a.patch(s+"/".concat(e._id),e)}}]),e}();t.default=new i},65:function(e,t,a){},76:function(e,t,a){e.exports=a(137)},81:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.74db9756.chunk.js.map